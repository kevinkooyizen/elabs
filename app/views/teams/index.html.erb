<div class="teams-container">

  <div class="teams-search">
    <h5>SEARCH TEAMS</h5>
    <div class="search-form">
      <% @params||={} %>
      <%= form_for :teams_search, url: teams_search_path, method: :get do |f| %>
          <br>
          <%= f.label :name %>
          <%= f.text_field :name, value: @params.dig(:name) %>
          <br>
          <br>
          <%= f.label :country %>
          <%= f.text_field :country, value: @params.dig(:country) %>
          <br>
          <br>
          <%= f.submit 'Search', class: 'search-btn' %>
      <% end %>
    </div>
  </div>

  <div class="teams-index">
    <% @teams.each do |team| %>

      <div class="team-card">
        <h6 class="team-id">Team id: <%= team.dota2_team_id %> <br></h6>
        <h6 class="team-name">Name: <%= link_to "#{team.name}", team_path(team) %> <br></h6>
        <h6 class="team-rating">Rating: <%= team.rating %><br> </h6>
        <h6 class="team-winrate">
          Winrate:
          <% if !team.winrate.nil? %>
            <%= team.winrate %>%
          <% else %>
            Insufficient data.
          <% end %>
          <br>
        </h6>
        <h6 class="team-roster">Roster: <br></h6>
        <!-- TEAM ROSTER -->
        <% team.members.each do |player| %>
          <a href="<%= player_path(Player.find_by(steam_id: player.account_id)) %>">
                <%= player.name %> <br>
          </a>
        <% end %>
        <hr>
      </div>
    <% end %>

  </div>

</div>

<div class="pagination">
  <%= paginate @teams, window: 2 %>
</div>
